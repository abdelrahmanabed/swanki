(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[163],{1384:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/shopping/payment",function(){return l(2494)}])},3638:function(e,t,l){"use strict";l.d(t,{Z:function(){return c}});var a=l(5893),s=l(1664),n=l.n(s),r=l(9150),i=l(5303);l(7294);var o=l(615);function c(e){return(0,a.jsxs)("div",{className:"relative ".concat(e.className," m-0.5 md:ml-0 md:m-2"),children:[(0,a.jsx)(i.Z,{className:"absolute left-2 bottom-16 z-20 sm:bottom-12",itemId:e.itemId,label:e.label,itemImage:e.img,Price:e.price,admin:e.admin}),(0,a.jsx)(r.Z,{className:"absolute md:bottom-12 sm:bottom-24 bottom-28 z-20 left-2 md:right-4 md:left-auto",itemId:e.itemId,label:e.label,itemImage:e.img,Price:e.price}),(0,a.jsxs)(n(),{href:e.href,className:" relative flex mt-0.5 mr-0.5 flex-col overflow-hidden w-auto h-auto",children:[(0,a.jsx)("div",{className:"h-auto rounded-large xl:h-auto relative overflow-hidden",children:(0,a.jsx)(o.lr,{className:"",showIndicators:e.showIndicators,showStatus:e.showStatus,autoPlay:e.autoPlay,infiniteLoop:e.infiniteLoop,animationHandler:e.animationHandler,stopOnHover:e.stopOnHover,emulateTouch:e.emulateTouch,showArrows:e.showArrows,transitionTime:e.transitionTime,interval:e.interval,showThumbs:e.showThumbs,children:e.imgArr})}),(0,a.jsxs)("div",{className:"flex p-2 justify-between bg-".concat(e.iColor),children:[(0,a.jsx)("div",{className:"overflow-x-clip h-5 w-2/3",children:(0,a.jsx)("span",{id:"iclabel",className:"text-xs text-ellipsis",children:e.label})}),(0,a.jsx)("div",{className:"flex items-center justify-end",children:(0,a.jsx)("span",{id:"icprice",className:"text-xs whitespace-nowrap font-bold bg-opacity-50 bg-third-c w-fit p-1 rounded-full px-2",children:e.price+" "+e.EGP})})]})]})]})}l(1538)},2494:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return d}});var a=l(5893);l(1664);var s=l(7294),n=l(3907);l(3638);var r=l(6154),i=l(1163);l(4721);var o=l(1273),c=l(1021);function d(){let e=(0,o.b)(),[t,l]=(0,s.useState)(""),[d,u]=(0,s.useState)(""),[m,x]=(0,s.useState)(""),[h,f]=(0,s.useState)(""),[p,w]=(0,s.useState)(""),[g,j]=(0,s.useState)(""),[b,v]=(0,s.useState)(""),[N,y]=(0,s.useState)(""),[S,I]=(0,s.useState)([]),[A,C]=(0,s.useState)(S[0]),[E,P]=(0,s.useState)(),[T,_]=(0,s.useState)([]),[k,Z]=(0,s.useState)(),[O,D]=(0,n.Z)("cart",[]),L=(0,i.useRouter)(),B=()=>{l(!t)},H=async(t,l)=>{try{let a=await r.Z.put("".concat(e,"/users/").concat(t,"/addresses"),{Address:l});console.log(a.data),window.location.reload()}catch(e){console.log(e)}},z=e=>{if(e.preventDefault(),h&&p&&m&&g&&N&&b){let e=document.getElementById("error-message");e.innerText=""}else{let e=document.getElementById("error-message");e.innerText="All fields are required";return}let t=localStorage.getItem("adminID");H(t,{firstName:h,lastName:p,region:m,area:g,Address:N,phone:b})};(0,s.useEffect)(()=>{let t=window.localStorage.getItem("adminID");r.Z.get("".concat(e,"/admin/").concat(t,"/addresses")).then(e=>{I(e.data),C(e.data[0])});let l=localStorage.getItem("cart");l&&(D(JSON.parse(l)),P(O.reduce((e,t)=>e+t.Price,0)))},[]);let F=async t=>{t.preventDefault();let l=window.localStorage.getItem("adminID"),a=window.localStorage.getItem("userEmail");try{let t=await r.Z.post("".concat(e,"/orders"),{userId:l,userEmail:a,items:O,userAdd:A});console.log(t.data),L.push("/confirmation")}catch(e){console.error(e)}},X=e=>{C(e)};return 0==O.length?"":(0,a.jsxs)("div",{id:"paymentPage",className:" relative flex flex-wrap flex-col  justify-between items-center m-2 rounded-large overflow-hidden",children:[(0,a.jsxs)("div",{className:"  flex flex-col  space-y-2 p-2 w-full ",children:[(0,a.jsx)("span",{className:" font-extralight text-3xl",children:"Choose an Address"}),(0,a.jsxs)("div",{className:"flex justify-center flex-wrap items-center",children:[S.map((e,t)=>(0,a.jsxs)("button",{className:"".concat(e===A?" border-main-t relative border-4":""," rounded-large flex relative justify-center m-2 h-56 w-56 flex-col border pl-3 bg-third-c space-y-2 duration-500"),onClick:()=>X(e),children:[(0,a.jsx)("span",{className:"font-thin",children:e.firstName}),(0,a.jsx)("span",{className:"font-thin",children:e.phone}),(0,a.jsx)("span",{className:"font-bold",children:e.region}),(0,a.jsx)("span",{className:"font-bold",children:e.area}),(0,a.jsx)("span",{className:"font-bold",children:e.Address}),e===A?(0,a.jsx)("i",{class:"ri-map-pin-fill text-main-t absolute text-4xl right-1 bottom-1"}):null]},t)),(0,a.jsxs)("button",{onClick:B,className:"".concat(t?"active":""," flex group rounded-full bg-main-t hover:bg-main-c  duration-300 justify-evenly m-0.5 w-40 h-40  md:h-40 md:w-40 flex-col  items-center space-y-2"),id:"addnewaddressbutton",children:[(0,a.jsx)("span",{className:"text-7xl w-11 h-11 flex justify-center   ",children:(0,a.jsx)("i",{class:"ri-map-pin-add-fill  group-hover:text-white group-hover:text-9xl duration-500"})}),(0,a.jsx)("span",{className:" font-thin text-xs duration-500 group-hover:opacity-0",children:"Add New Address"})]})]}),(0,a.jsxs)("form",{id:"addAF",className:"".concat(t?"active":""," rounded-large flex-col absolute bg-third-c p-3 flex sm:items-center md:w-fit space-y-3 md:space-y-5 top-2 w-full h-fit  duration-300 "),children:[(0,a.jsxs)("div",{className:"w-full flex items-center  space-x-4",children:[(0,a.jsx)("div",{onClick:B,className:" flex justify-center items-center cursor-pointer hover:text-main-t duration-300 rounded-full bg-main-c text-3xl text-white w-8 h-8",children:(0,a.jsx)("i",{class:" ri-close-line"})})," ",(0,a.jsx)("span",{className:" text-red opacity-80",id:"error-message"})]}),(0,a.jsxs)("div",{className:"w-full sm:w-2/3 md:w-96 space-x-2 flex",children:[(0,a.jsx)("input",{type:"text",placeholder:"First Name",className:"bg-white p-3 rounded-full w-full",value:h,onChange:e=>f(e.target.value)}),"          ",(0,a.jsx)("input",{type:"text",placeholder:"Last Name",className:"bg-white p-3 rounded-full w-full",value:p,onChange:e=>w(e.target.value)})]}),(0,a.jsx)(c.Xz,{country:"Egypt",value:m,onChange:e=>x(e),className:"rounded-full p-3 w-full bg-white sm:w-2/3 md:w-full"}),(0,a.jsx)("input",{type:"text",className:"rounded-full p-3 bg-white w-full sm:w-2/3 md:w-full",placeholder:"Area",value:g,onChange:e=>j(e.target.value)}),(0,a.jsx)("input",{type:"text",className:"rounded-full p-3 bg-white w-full sm:w-2/3 md:w-full",placeholder:"Address",value:N,onChange:e=>y(e.target.value)}),"        ",(0,a.jsxs)("div",{className:"flex w-full space-x-2 sm:w-2/3 md:w-full",children:[(0,a.jsx)("input",{type:"tel",readOnly:!0,value:"+20",className:"p-3 rounded-full bg-white w-14"}),(0,a.jsx)("input",{type:"tel",className:"w-full rounded-full p-3 bg-white",maxLength:"10",minLength:"10",placeholder:"phone number",value:b,onChange:e=>v(e.target.value)}),"        "]}),(0,a.jsx)("input",{type:"submit",value:"Add Address",className:"rounded-full p-3 w-full bg-main-t sm:w-2/3 md:w-full",onClick:z})]})]}),(0,a.jsxs)("div",{className:"w-full h-72 md:w-96 bg-third-c flex flex-col space-y-2 p-7 bg-opacity-60 m-2 ml-0 rounded-large justify-center items-center",children:[(0,a.jsxs)("div",{children:[" ",(0,a.jsx)("span",{className:"text-xl ",children:"Total Amount "}),(0,a.jsxs)("span",{className:"text-2xl font-extrabold",children:[O.reduce((e,t)=>e+t.Price,0)," EGP"]})]}),(0,a.jsxs)("div",{children:[" ",(0,a.jsx)("span",{className:"text-xl ",children:"Total Items "}),(0,a.jsxs)("span",{className:"text-2xl font-extrabold",children:[O.length," "]})]}),S.length<=0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{disabled:!0,className:"bg-main-c cursor-not-allowed opacity-50 text-white p-2 rounded-lg text-xl",children:"Buy"}),(0,a.jsxs)("span",{className:" animate-bounce text-center text-sm ",children:[(0,a.jsx)("span",{className:" text-xl  text-red",children:"*"}),"Please Add An Address to Complete Purshace"]})]}):(0,a.jsx)("button",{onClick:F,className:"bg-main-t hover:text-white hover:text-3xl duration-300  p-4 px-7 text-4xl rounded-full font-extralight",children:"Buy"})]})]})}}},function(e){e.O(0,[624,997,774,888,179],function(){return e(e.s=1384)}),_N_E=e.O()}]);